<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>2026 äº¬éƒ½è‡ªé§•æ—…éŠåŠ©æ‰‹</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* è«è˜­è¿ªè‰²ç³»è‡ªå®šç¾© */
        :root {
            --m-bg: #F4F1EE;      /* ç±³ç™½åº• */
            --m-text: #4A4A4A;    /* æ·±ç°å­— */
            --m-blue: #A5B5BF;    /* æ™¯é»-è—ç° */
            --m-rose: #D6B0B1;    /* é¤å»³-æŸ”ç²‰ */
            --m-sage: #B4C1A5;    /* äº¤é€š-è‰ç° */
            --m-sand: #E2D1C3;    /* ä½å®¿/å·¥å…·-æ²™è‰² */
        }

        body {
            background-color: var(--m-bg);
            color: var(--m-text);
            font-family: "PingFang TC", "Microsoft JhengHei", sans-serif;
            -webkit-tap-highlight-color: transparent;
        }

        .morandi-card {
            background: #FFFFFF;
            border-radius: 16px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.03);
            transition: transform 0.2s;
        }

        .active-tab {
            color: var(--m-blue);
            border-top: 3px solid var(--m-blue);
        }

        .badge-attraction { background-color: var(--m-blue); color: white; }
        .badge-food { background-color: var(--m-rose); color: white; }
        .badge-transport { background-color: var(--m-sage); color: white; }

        /* éš±è—æ»¾å‹•æ¢ */
        ::-webkit-scrollbar { display: none; }
    </style>
</head>
<body class="pb-24">

    <header class="p-6 sticky top-0 bg-[#F4F1EE]/90 backdrop-blur-md z-50 flex justify-between items-end">
        <div>
            <h1 class="text-2xl font-light tracking-widest">KYOTO 2026</h1>
            <p id="current-date-label" class="text-sm opacity-60">1/5 (ä¸€) æŠµé”äº¬éƒ½</p>
        </div>
        <div id="weather-box" class="text-right">
            <p class="text-xs opacity-50 italic">Weather</p>
            <p class="text-lg font-medium">--Â°C â˜ï¸</p>
        </div>
    </header>

    <main id="app-content" class="px-5 space-y-6">
        </main>

    <nav class="fixed bottom-0 left-0 right-0 bg-white border-t border-gray-100 flex justify-around pb-6 pt-3 px-2 z-50">
        <button onclick="changeTab('itinerary')" id="nav-itinerary" class="flex flex-col items-center gap-1 text-gray-400 active-tab">
            <i class="fa-solid fa-calendar-day text-xl"></i>
            <span class="text-[10px]">è¡Œç¨‹</span>
        </button>
        <button onclick="changeTab('info')" id="nav-info" class="flex flex-col items-center gap-1 text-gray-400">
            <i class="fa-solid fa-suitcase text-xl"></i>
            <span class="text-[10px]">è³‡è¨Š</span>
        </button>
        <button onclick="changeTab('budget')" id="nav-budget" class="flex flex-col items-center gap-1 text-gray-400">
            <i class="fa-solid fa-wallet text-xl"></i>
            <span class="text-[10px]">è¨˜å¸³</span>
        </button>
        <button onclick="changeTab('japanese')" id="nav-japanese" class="flex flex-col items-center gap-1 text-gray-400">
            <i class="fa-solid fa-language text-xl"></i>
            <span class="text-[10px]">æ—¥èª</span>
        </button>
    </nav>

    <script>
        // --- 1. è³‡æ–™å®šç¾© (åŸºæ–¼ PDF å…§å®¹) ---
        const itineraryData = [
            {
                date: "1/5", week: "ä¸€", title: "æŠµé”äº¬éƒ½",
                items: [
                    { time: "13:00", type: "transport", title: "æŠµé”é—œè¥¿æ©Ÿå ´ (KIX)", detail: "æ­ä¹˜ Haruka å‰å¾€äº¬éƒ½", map: "é—œè¥¿æ©Ÿå ´" },
                    { time: "15:30", type: "stay", title: "äº¬éƒ½äºŒæ¢èŠ±åœ’é£¯åº—", detail: "Check-in è¾¦ç†å…¥ä½", map: "äº¬éƒ½äºŒæ¢èŠ±åœ’é£¯åº—", code: "Booking: #KY12345" },
                    { time: "16:30", type: "attraction", title: "æ–°é¢¨é¤¨é€›è¡—", detail: "éšˆç ”å¾è¨­è¨ˆå»ºç¯‰ï¼Œè³ªæ„Ÿæ–‡é’åœ°æ¨™", map: "æ–°é¢¨é¤¨" },
                    { time: "18:30", type: "food", title: "æ™šé¤ï¼šç©ºç¦ªäº­", detail: "ç²¾ç·»äº¬éƒ½æ–™ç† ", map: "ç©ºç¦ªäº­", highlights: ["#å¿…åƒç¾é£Ÿï¼šäº¬æ‡·çŸ³æ–™ç†"] }
                ]
            },
            {
                date: "1/6", week: "äºŒ", title: "ç¶“å…¸äº¬éƒ½",
                items: [
                    { time: "12:00", type: "attraction", title: "æ¸…æ°´å¯ºã€äºŒå¹´å‚ã€ä¸‰å¹´å‚", detail: "ç©¿æ¢­æ­·å²å»ºç¯‰å··å¼„ ", map: "æ¸…æ°´å¯º" },
                    { time: "15:30", type: "attraction", title: "ç¥‡åœ’æ•£ç­–", detail: "å…«å‚ç¥ç¤¾ã€èŠ±è¦‹å°è·¯ã€æ²³åŸç”º ", map: "å…«å‚ç¥ç¤¾" },
                    { time: "17:00", type: "food", title: "æ™šé¤ï¼šäº¬éƒ½è»Šç«™", detail: "å¤šæ¨£åŒ–é¸æ“‡", map: "äº¬éƒ½è»Šç«™" }
                ]
            },
            {
                date: "1/7", week: "ä¸‰", title: "åµå±±æº«æ³‰é«”é©—",
                items: [
                    { time: "10:00", type: "attraction", title: "TeamLab äº¬éƒ½", detail: "æ²‰æµ¸å¼å…‰å½±è—è¡“ ", map: "teamLab Kyoto" },
                    { time: "13:00", type: "attraction", title: "åµå±±ç²¾è¯éŠ", detail: "ç«¹æ—å°å¾‘ã€å¤©é¾å¯ºã€æ¸¡æœˆæ©‹ ", map: "åµå±±ç«¹æ—å°å¾‘" },
                    { time: "16:00", type: "attraction", title: "åµå±±æº«æ³‰ï¼šé¢¨é¢¨ã®æ¹¯", detail: "åµå±±å”¯ä¸€æ—¥æ­¸æº«æ³‰ï¼Œæ³¡æ¹¯æ”¾é¬† ", map: "é¢¨é¢¨ã®æ¹¯", highlights: ["#å¿…å»ï¼šéœ²å¤©è¶³æ¹¯"] },
                    { time: "19:30", type: "food", title: "åä»£è±¬æ’ æ´» (Katsukura)", detail: "äº¬éƒ½è»Šç«™åº—ï¼Œå£æ„Ÿé…¥è„† ", map: "åä»£è±¬æ’ æ´»", highlights: ["#å¿…é»èœå–®ï¼šåšåˆ‡è±¬æ’å®šé£Ÿ"] }
                ]
            },
            {
                date: "1/8", week: "å››", title: "ç¥ä¹‹é ˜åŸŸæ•£ç­–",
                items: [
                    { time: "10:00", type: "food", title: "Fiveran éºµåŒ…åº—", detail: "ç•¶åœ°ç‰¹è‰²ååº— ", map: "Fiveran", highlights: ["#å¿…é»èœå–®ï¼šäººæ°£ç”Ÿåå¸"] },
                    { time: "11:30", type: "attraction", title: "è²´èˆ¹ç¥ç¤¾", detail: "æ°´å åœèˆ‡çµ•ç¾é³¥å±…æ­¥é“ ", map: "è²´èˆ¹ç¥ç¤¾" },
                    { time: "15:00", type: "attraction", title: "ä¼è¦‹ç¨»è·å¤§ç¤¾", detail: "å‚æ™šæ™‚åˆ†åƒæœ¬é³¥å±…å…‰å½±æœ€ç¾ ", map: "ä¼è¦‹ç¨»è·å¤§ç¤¾" },
                    { time: "18:30", type: "food", title: "ç‡’è‚‰å¼˜å•†åº—", detail: "äº¬éƒ½å¡” SANDO åº—ï¼Œå¹³åƒ¹å’Œç‰› ", map: "ç‡’è‚‰å¼˜å•†åº— äº¬éƒ½å¡”", highlights: ["#å¿…åƒç¾é£Ÿï¼šå’Œç‰›å…§è‡Ÿã€åšåˆ‡ç‰›èˆŒ"] }
                ]
            },
            {
                date: "1/9", week: "äº”", title: "äºŒæ¢åŸèˆ‡è³¦æ­¸",
                items: [
                    { time: "10:00", type: "food", title: "å–«èŒ¶ãƒãƒ­ãƒ« / CLAMP COFFEE", detail: "äº«å—æ–‡é’æ—¥å¼å–«èŒ¶ ", map: "Kissa Tirol", highlights: ["#å¿…é»èœå–®ï¼šåšç‰‡åå¸å¥—é¤"] },
                    { time: "11:00", type: "attraction", title: "äºŒæ¢åŸ", detail: "å¾·å·å¹•åºœåœ¨äº¬æ“šé» ", map: "äºŒæ¢åŸ" },
                    { time: "15:00", type: "transport", title: "é—œè¥¿æ©Ÿå ´èµ·é£›", detail: "13:00 æ­ä¹˜ Haruka é›¢é–‹ ", map: "é—œè¥¿æ©Ÿå ´" }
                ]
            }
        ];

        const phrases = [
            { cat: "äº¤é€š", zh: "é€™è£¡å¯ä»¥åœè»Šå—ï¼Ÿ", jp: "ã“ã“ã«é§è»Šã§ãã¾ã™ã‹ï¼Ÿ", romaji: "Koko ni chusha dekimasu ka?", tag: "è‡ªé§•" },
            { cat: "é¤å»³", zh: "è«‹çµ¦æˆ‘å…©å€‹äººä½å­ã€‚", jp: "äºŒäººã§ã™ã€ãŠé¡˜ã„ã—ã¾ã™ã€‚", romaji: "Futari desu, onegaishimasu.", tag: "é»é¤" },
            { cat: "è³¼ç‰©", zh: "è«‹å•å¯ä»¥å…ç¨…å—ï¼Ÿ", jp: "å…ç¨ã§ãã¾ã™ã‹ï¼Ÿ", romaji: "Menzei dekimasu ka?", tag: "çµå¸³" },
            { cat: "ç·Šæ€¥", zh: "è«‹å¹«æˆ‘å«æ•‘è­·è»Šã€‚", jp: "æ•‘æ€¥è»Šã‚’å‘¼ã‚“ã§ãã ã•ã„ã€‚", romaji: "Kyukyusha o yonde kudasai.", tag: "æ•‘å‘½" }
        ];

        // --- 2. æ‡‰ç”¨é‚è¼¯ ---

        let currentTab = 'itinerary';
        let activeDayIndex = 0;

        function initApp() {
            renderItinerary();
            updateWeather();
        }

        function changeTab(tab) {
            currentTab = tab;
            document.querySelectorAll('nav button').forEach(btn => btn.classList.remove('active-tab'));
            document.getElementById(`nav-${tab}`).classList.add('active-tab');
            
            if (tab === 'itinerary') renderItinerary();
            if (tab === 'info') renderInfo();
            if (tab === 'budget') renderBudget();
            if (tab === 'japanese') renderJapanese();
        }

        // è¡Œç¨‹æ¸²æŸ“
        function renderItinerary() {
            const day = itineraryData[activeDayIndex];
            document.getElementById('current-date-label').innerText = `${day.date} (${day.week}) ${day.title}`;
            
            let html = `
                <div class="flex gap-2 overflow-x-auto pb-2 mb-2">
                    ${itineraryData.map((d, idx) => `
                        <button onclick="setActiveDay(${idx})" class="px-4 py-2 rounded-full text-xs shrink-0 ${activeDayIndex === idx ? 'bg-[#A5B5BF] text-white shadow-md' : 'bg-white text-gray-400 border border-gray-100'}">
                            Day ${idx + 1}
                        </button>
                    `).join('')}
                </div>
            `;

            day.items.forEach(item => {
                const badgeColor = item.type === 'food' ? 'badge-food' : (item.type === 'transport' ? 'badge-transport' : 'badge-attraction');
                html += `
                    <div class="morandi-card p-5 relative overflow-hidden">
                        <div class="flex justify-between items-start mb-2">
                            <span class="text-xs font-mono text-gray-400">${item.time}</span>
                            <span class="text-[10px] px-2 py-0.5 rounded-full ${badgeColor}">${item.type.toUpperCase()}</span>
                        </div>
                        <h3 class="text-lg font-medium mb-1">${item.title}</h3>
                        <p class="text-sm text-gray-500 font-light mb-4">${item.detail}</p>
                        
                        ${item.highlights ? `
                            <div class="flex flex-wrap gap-2 mb-4">
                                ${item.highlights.map(h => `<span class="text-[10px] bg-red-50 text-red-500 px-2 py-0.5 rounded font-bold">${h}</span>`).join('')}
                            </div>
                        ` : ''}

                        ${item.code ? `<div class="bg-gray-50 p-2 text-xs mb-4 border-l-2 border-gray-200 font-mono">é ç´„è™Ÿ: ${item.code}</div>` : ''}

                        <div class="flex border-t border-gray-50 pt-3 gap-6">
                            <button onclick="window.open('https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(item.map)}')" class="flex items-center gap-1 text-sm text-gray-400">
                                <i class="fa-solid fa-location-dot text-xs"></i> å°èˆª
                            </button>
                            <button class="flex items-center gap-1 text-sm text-gray-400">
                                <i class="fa-solid fa-circle-info text-xs"></i> æ”»ç•¥
                            </button>
                        </div>
                    </div>
                `;
            });
            document.getElementById('app-content').innerHTML = html;
        }

        function setActiveDay(idx) {
            activeDayIndex = idx;
            renderItinerary();
        }

        // è³‡è¨Šåˆ†é 
        function renderInfo() {
            document.getElementById('current-date-label').innerText = "æ—…ç¨‹å¿…å‚™è³‡è¨Š";
            const html = `
                <div class="space-y-4">
                    <div class="morandi-card p-5">
                        <h4 class="font-bold mb-3 flex items-center gap-2"><i class="fa-solid fa-plane"></i> èˆªç­èˆ‡äº¤é€š</h4>
                        <p class="text-sm text-gray-600">å›ç¨‹ï¼š1/9 15:00 é—œè¥¿æ©Ÿå ´èµ·é£› </p>
                        <p class="text-sm text-gray-600">ç§Ÿè»Šï¼šå·²é ç´„ / ETC å¡å·²å‚™</p>
                    </div>
                    <div class="morandi-card p-5">
                        <h4 class="font-bold mb-3 flex items-center gap-2"><i class="fa-solid fa-hotel"></i> ä½å®¿è³‡è¨Š</h4>
                        <p class="text-sm text-gray-600">äº¬éƒ½äºŒæ¢èŠ±åœ’é£¯åº— </p>
                        <p class="text-xs text-blue-500 mt-1">ã€’604-0000 äº¬éƒ½åºœäº¬éƒ½å¸‚ä¸­äº¬å€...</p>
                    </div>
                    <div class="morandi-card p-5">
                        <h4 class="font-bold mb-3 flex items-center gap-2 text-red-400"><i class="fa-solid fa-phone-flip"></i> ç·Šæ€¥è¯çµ¡</h4>
                        <div class="grid grid-cols-2 gap-2 text-sm">
                            <div class="bg-red-50 p-2 rounded">è­¦å¯Ÿ: 110</div>
                            <div class="bg-red-50 p-2 rounded">æ•‘è­·: 119</div>
                        </div>
                    </div>
                </div>
            `;
            document.getElementById('app-content').innerHTML = html;
        }

        // è¨˜å¸³åŠŸèƒ½ (LocalStorage)
        function renderBudget() {
            document.getElementById('current-date-label').innerText = "æ—…ç¨‹é–‹æ”¯ç®¡ç†";
            const logs = JSON.parse(localStorage.getItem('kyoto_budget') || '[]');
            const total = logs.reduce((sum, item) => sum + Number(item.amount), 0);

            let html = `
                <div class="morandi-card p-5 mb-4 bg-gray-800 text-white">
                    <p class="text-xs opacity-60">Total Expense</p>
                    <p class="text-3xl font-light">Â¥ ${total.toLocaleString()}</p>
                </div>
                
                <div class="morandi-card p-5 mb-4">
                    <div class="flex gap-2">
                        <input id="exp-name" type="text" placeholder="å“é …" class="flex-1 border-b text-sm focus:outline-none py-2">
                        <input id="exp-amt" type="number" placeholder="é‡‘é¡" class="w-24 border-b text-sm focus:outline-none py-2">
                        <button onclick="addExpense()" class="bg-[#B4C1A5] text-white px-4 py-2 rounded-lg text-sm">æ–°å¢</button>
                    </div>
                </div>

                <div class="space-y-2">
                    ${logs.reverse().map((item, idx) => `
                        <div class="flex justify-between items-center p-3 border-b border-gray-100 text-sm">
                            <span class="text-gray-500">${item.name}</span>
                            <span class="font-medium">Â¥ ${Number(item.amount).toLocaleString()}</span>
                        </div>
                    `).join('')}
                </div>
            `;
            document.getElementById('app-content').innerHTML = html;
        }

        function addExpense() {
            const name = document.getElementById('exp-name').value;
            const amount = document.getElementById('exp-amt').value;
            if(!name || !amount) return;
            const logs = JSON.parse(localStorage.getItem('kyoto_budget') || '[]');
            logs.push({name, amount, date: new Date().toLocaleTimeString()});
            localStorage.setItem('kyoto_budget', JSON.stringify(logs));
            renderBudget();
        }

        // æ—¥èªå­—å¡ (TTS èªéŸ³)
        function renderJapanese() {
            document.getElementById('current-date-label').innerText = "æ—…éŠæ—¥èªéš¨èº«è½";
            let html = `<div class="grid grid-cols-1 gap-4">`;
            phrases.forEach(p => {
                html += `
                    <div class="morandi-card p-5 flex justify-between items-center">
                        <div>
                            <span class="text-[10px] border border-gray-200 text-gray-400 px-2 py-0.5 rounded">${p.cat}</span>
                            <h3 class="text-md mt-2">${p.zh}</h3>
                            <p class="text-sm font-medium text-blue-400 mt-1">${p.jp}</p>
                            <p class="text-[10px] text-gray-400 font-mono">${p.romaji}</p>
                        </div>
                        <button onclick="speak('${p.jp}')" class="w-10 h-10 rounded-full bg-gray-50 flex items-center justify-center text-gray-400 active:bg-blue-50 active:text-blue-400">
                            <i class="fa-solid fa-volume-high"></i>
                        </button>
                    </div>
                `;
            });
            html += `</div>`;
            document.getElementById('app-content').innerHTML = html;
        }

        function speak(text) {
            const utterance = new SpeechSynthesisUtterance(text);
            utterance.lang = 'ja-JP';
            window.speechSynthesis.speak(utterance);
        }

        function updateWeather() {
            // é€™è£¡å¯ä»¥ä¸²æ¥ OpenWeather APIï¼Œç›®å‰å…ˆæ¨¡æ“¬
            const box = document.querySelector('#weather-box p.text-lg');
            box.innerText = "6Â°C ğŸŒ¥ï¸";
        }

        // åˆå§‹åŒ–
        initApp();
    </script>
</body>
</html>
